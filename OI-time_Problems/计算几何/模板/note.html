<!DOCTYPE html>
    <html>
    <head>
        <meta charset="UTF-8">
        <title>&#x8BA1;&#x7B97;&#x51E0;&#x4F55;&#x6A21;&#x677F;&#x5927;&#x5168;</title>
        <style>
/* From extension goessner.mdmath */
@font-face{font-family:KaTeX_AMS;src:url(fonts/KaTeX_AMS-Regular.woff2) format("woff2"),url(fonts/KaTeX_AMS-Regular.woff) format("woff"),url(fonts/KaTeX_AMS-Regular.ttf) format("truetype");font-weight:400;font-style:normal}@font-face{font-family:KaTeX_Caligraphic;src:url(fonts/KaTeX_Caligraphic-Bold.woff2) format("woff2"),url(fonts/KaTeX_Caligraphic-Bold.woff) format("woff"),url(fonts/KaTeX_Caligraphic-Bold.ttf) format("truetype");font-weight:700;font-style:normal}@font-face{font-family:KaTeX_Caligraphic;src:url(fonts/KaTeX_Caligraphic-Regular.woff2) format("woff2"),url(fonts/KaTeX_Caligraphic-Regular.woff) format("woff"),url(fonts/KaTeX_Caligraphic-Regular.ttf) format("truetype");font-weight:400;font-style:normal}@font-face{font-family:KaTeX_Fraktur;src:url(fonts/KaTeX_Fraktur-Bold.woff2) format("woff2"),url(fonts/KaTeX_Fraktur-Bold.woff) format("woff"),url(fonts/KaTeX_Fraktur-Bold.ttf) format("truetype");font-weight:700;font-style:normal}@font-face{font-family:KaTeX_Fraktur;src:url(fonts/KaTeX_Fraktur-Regular.woff2) format("woff2"),url(fonts/KaTeX_Fraktur-Regular.woff) format("woff"),url(fonts/KaTeX_Fraktur-Regular.ttf) format("truetype");font-weight:400;font-style:normal}@font-face{font-family:KaTeX_Main;src:url(fonts/KaTeX_Main-Bold.woff2) format("woff2"),url(fonts/KaTeX_Main-Bold.woff) format("woff"),url(fonts/KaTeX_Main-Bold.ttf) format("truetype");font-weight:700;font-style:normal}@font-face{font-family:KaTeX_Main;src:url(fonts/KaTeX_Main-BoldItalic.woff2) format("woff2"),url(fonts/KaTeX_Main-BoldItalic.woff) format("woff"),url(fonts/KaTeX_Main-BoldItalic.ttf) format("truetype");font-weight:700;font-style:italic}@font-face{font-family:KaTeX_Main;src:url(fonts/KaTeX_Main-Italic.woff2) format("woff2"),url(fonts/KaTeX_Main-Italic.woff) format("woff"),url(fonts/KaTeX_Main-Italic.ttf) format("truetype");font-weight:400;font-style:italic}@font-face{font-family:KaTeX_Main;src:url(fonts/KaTeX_Main-Regular.woff2) format("woff2"),url(fonts/KaTeX_Main-Regular.woff) format("woff"),url(fonts/KaTeX_Main-Regular.ttf) format("truetype");font-weight:400;font-style:normal}@font-face{font-family:KaTeX_Math;src:url(fonts/KaTeX_Math-BoldItalic.woff2) format("woff2"),url(fonts/KaTeX_Math-BoldItalic.woff) format("woff"),url(fonts/KaTeX_Math-BoldItalic.ttf) format("truetype");font-weight:700;font-style:italic}@font-face{font-family:KaTeX_Math;src:url(fonts/KaTeX_Math-Italic.woff2) format("woff2"),url(fonts/KaTeX_Math-Italic.woff) format("woff"),url(fonts/KaTeX_Math-Italic.ttf) format("truetype");font-weight:400;font-style:italic}@font-face{font-family:"KaTeX_SansSerif";src:url(fonts/KaTeX_SansSerif-Bold.woff2) format("woff2"),url(fonts/KaTeX_SansSerif-Bold.woff) format("woff"),url(fonts/KaTeX_SansSerif-Bold.ttf) format("truetype");font-weight:700;font-style:normal}@font-face{font-family:"KaTeX_SansSerif";src:url(fonts/KaTeX_SansSerif-Italic.woff2) format("woff2"),url(fonts/KaTeX_SansSerif-Italic.woff) format("woff"),url(fonts/KaTeX_SansSerif-Italic.ttf) format("truetype");font-weight:400;font-style:italic}@font-face{font-family:"KaTeX_SansSerif";src:url(fonts/KaTeX_SansSerif-Regular.woff2) format("woff2"),url(fonts/KaTeX_SansSerif-Regular.woff) format("woff"),url(fonts/KaTeX_SansSerif-Regular.ttf) format("truetype");font-weight:400;font-style:normal}@font-face{font-family:KaTeX_Script;src:url(fonts/KaTeX_Script-Regular.woff2) format("woff2"),url(fonts/KaTeX_Script-Regular.woff) format("woff"),url(fonts/KaTeX_Script-Regular.ttf) format("truetype");font-weight:400;font-style:normal}@font-face{font-family:KaTeX_Size1;src:url(fonts/KaTeX_Size1-Regular.woff2) format("woff2"),url(fonts/KaTeX_Size1-Regular.woff) format("woff"),url(fonts/KaTeX_Size1-Regular.ttf) format("truetype");font-weight:400;font-style:normal}@font-face{font-family:KaTeX_Size2;src:url(fonts/KaTeX_Size2-Regular.woff2) format("woff2"),url(fonts/KaTeX_Size2-Regular.woff) format("woff"),url(fonts/KaTeX_Size2-Regular.ttf) format("truetype");font-weight:400;font-style:normal}@font-face{font-family:KaTeX_Size3;src:url(fonts/KaTeX_Size3-Regular.woff2) format("woff2"),url(fonts/KaTeX_Size3-Regular.woff) format("woff"),url(fonts/KaTeX_Size3-Regular.ttf) format("truetype");font-weight:400;font-style:normal}@font-face{font-family:KaTeX_Size4;src:url(fonts/KaTeX_Size4-Regular.woff2) format("woff2"),url(fonts/KaTeX_Size4-Regular.woff) format("woff"),url(fonts/KaTeX_Size4-Regular.ttf) format("truetype");font-weight:400;font-style:normal}@font-face{font-family:KaTeX_Typewriter;src:url(fonts/KaTeX_Typewriter-Regular.woff2) format("woff2"),url(fonts/KaTeX_Typewriter-Regular.woff) format("woff"),url(fonts/KaTeX_Typewriter-Regular.ttf) format("truetype");font-weight:400;font-style:normal}.katex{font:normal 1.21em KaTeX_Main,Times New Roman,serif;line-height:1.2;text-indent:0;text-rendering:auto}.katex *{-ms-high-contrast-adjust:none!important}.katex .katex-version:after{content:"0.11.1"}.katex .katex-mathml{position:absolute;clip:rect(1px,1px,1px,1px);padding:0;border:0;height:1px;width:1px;overflow:hidden}.katex .katex-html>.newline{display:block}.katex .base{position:relative;white-space:nowrap;width:min-content}.katex .base,.katex .strut{display:inline-block}.katex .textbf{font-weight:700}.katex .textit{font-style:italic}.katex .textrm{font-family:KaTeX_Main}.katex .textsf{font-family:KaTeX_SansSerif}.katex .texttt{font-family:KaTeX_Typewriter}.katex .mathdefault{font-family:KaTeX_Math;font-style:italic}.katex .mathit{font-family:KaTeX_Main;font-style:italic}.katex .mathrm{font-style:normal}.katex .mathbf{font-family:KaTeX_Main;font-weight:700}.katex .boldsymbol{font-family:KaTeX_Math;font-weight:700;font-style:italic}.katex .amsrm,.katex .mathbb,.katex .textbb{font-family:KaTeX_AMS}.katex .mathcal{font-family:KaTeX_Caligraphic}.katex .mathfrak,.katex .textfrak{font-family:KaTeX_Fraktur}.katex .mathtt{font-family:KaTeX_Typewriter}.katex .mathscr,.katex .textscr{font-family:KaTeX_Script}.katex .mathsf,.katex .textsf{font-family:KaTeX_SansSerif}.katex .mathboldsf,.katex .textboldsf{font-family:KaTeX_SansSerif;font-weight:700}.katex .mathitsf,.katex .textitsf{font-family:KaTeX_SansSerif;font-style:italic}.katex .mainrm{font-family:KaTeX_Main;font-style:normal}.katex .vlist-t{display:inline-table;table-layout:fixed}.katex .vlist-r{display:table-row}.katex .vlist{display:table-cell;vertical-align:bottom;position:relative}.katex .vlist>span{display:block;height:0;position:relative}.katex .vlist>span>span{display:inline-block}.katex .vlist>span>.pstrut{overflow:hidden;width:0}.katex .vlist-t2{margin-right:-2px}.katex .vlist-s{display:table-cell;vertical-align:bottom;font-size:1px;width:2px;min-width:2px}.katex .msupsub{text-align:left}.katex .mfrac>span>span{text-align:center}.katex .mfrac .frac-line{display:inline-block;width:100%;border-bottom-style:solid}.katex .hdashline,.katex .hline,.katex .mfrac .frac-line,.katex .overline .overline-line,.katex .rule,.katex .underline .underline-line{min-height:1px}.katex .mspace{display:inline-block}.katex .clap,.katex .llap,.katex .rlap{width:0;position:relative}.katex .clap>.inner,.katex .llap>.inner,.katex .rlap>.inner{position:absolute}.katex .clap>.fix,.katex .llap>.fix,.katex .rlap>.fix{display:inline-block}.katex .llap>.inner{right:0}.katex .clap>.inner,.katex .rlap>.inner{left:0}.katex .clap>.inner>span{margin-left:-50%;margin-right:50%}.katex .rule{display:inline-block;border:0 solid;position:relative}.katex .hline,.katex .overline .overline-line,.katex .underline .underline-line{display:inline-block;width:100%;border-bottom-style:solid}.katex .hdashline{display:inline-block;width:100%;border-bottom-style:dashed}.katex .sqrt>.root{margin-left:.27777778em;margin-right:-.55555556em}.katex .fontsize-ensurer.reset-size1.size1,.katex .sizing.reset-size1.size1{font-size:1em}.katex .fontsize-ensurer.reset-size1.size2,.katex .sizing.reset-size1.size2{font-size:1.2em}.katex .fontsize-ensurer.reset-size1.size3,.katex .sizing.reset-size1.size3{font-size:1.4em}.katex .fontsize-ensurer.reset-size1.size4,.katex .sizing.reset-size1.size4{font-size:1.6em}.katex .fontsize-ensurer.reset-size1.size5,.katex .sizing.reset-size1.size5{font-size:1.8em}.katex .fontsize-ensurer.reset-size1.size6,.katex .sizing.reset-size1.size6{font-size:2em}.katex .fontsize-ensurer.reset-size1.size7,.katex .sizing.reset-size1.size7{font-size:2.4em}.katex .fontsize-ensurer.reset-size1.size8,.katex .sizing.reset-size1.size8{font-size:2.88em}.katex .fontsize-ensurer.reset-size1.size9,.katex .sizing.reset-size1.size9{font-size:3.456em}.katex .fontsize-ensurer.reset-size1.size10,.katex .sizing.reset-size1.size10{font-size:4.148em}.katex .fontsize-ensurer.reset-size1.size11,.katex .sizing.reset-size1.size11{font-size:4.976em}.katex .fontsize-ensurer.reset-size2.size1,.katex .sizing.reset-size2.size1{font-size:.83333333em}.katex .fontsize-ensurer.reset-size2.size2,.katex .sizing.reset-size2.size2{font-size:1em}.katex .fontsize-ensurer.reset-size2.size3,.katex .sizing.reset-size2.size3{font-size:1.16666667em}.katex .fontsize-ensurer.reset-size2.size4,.katex .sizing.reset-size2.size4{font-size:1.33333333em}.katex .fontsize-ensurer.reset-size2.size5,.katex .sizing.reset-size2.size5{font-size:1.5em}.katex .fontsize-ensurer.reset-size2.size6,.katex .sizing.reset-size2.size6{font-size:1.66666667em}.katex .fontsize-ensurer.reset-size2.size7,.katex .sizing.reset-size2.size7{font-size:2em}.katex .fontsize-ensurer.reset-size2.size8,.katex .sizing.reset-size2.size8{font-size:2.4em}.katex .fontsize-ensurer.reset-size2.size9,.katex .sizing.reset-size2.size9{font-size:2.88em}.katex .fontsize-ensurer.reset-size2.size10,.katex .sizing.reset-size2.size10{font-size:3.45666667em}.katex .fontsize-ensurer.reset-size2.size11,.katex .sizing.reset-size2.size11{font-size:4.14666667em}.katex .fontsize-ensurer.reset-size3.size1,.katex .sizing.reset-size3.size1{font-size:.71428571em}.katex .fontsize-ensurer.reset-size3.size2,.katex .sizing.reset-size3.size2{font-size:.85714286em}.katex .fontsize-ensurer.reset-size3.size3,.katex .sizing.reset-size3.size3{font-size:1em}.katex .fontsize-ensurer.reset-size3.size4,.katex .sizing.reset-size3.size4{font-size:1.14285714em}.katex .fontsize-ensurer.reset-size3.size5,.katex .sizing.reset-size3.size5{font-size:1.28571429em}.katex .fontsize-ensurer.reset-size3.size6,.katex .sizing.reset-size3.size6{font-size:1.42857143em}.katex .fontsize-ensurer.reset-size3.size7,.katex .sizing.reset-size3.size7{font-size:1.71428571em}.katex .fontsize-ensurer.reset-size3.size8,.katex .sizing.reset-size3.size8{font-size:2.05714286em}.katex .fontsize-ensurer.reset-size3.size9,.katex .sizing.reset-size3.size9{font-size:2.46857143em}.katex .fontsize-ensurer.reset-size3.size10,.katex .sizing.reset-size3.size10{font-size:2.96285714em}.katex .fontsize-ensurer.reset-size3.size11,.katex .sizing.reset-size3.size11{font-size:3.55428571em}.katex .fontsize-ensurer.reset-size4.size1,.katex .sizing.reset-size4.size1{font-size:.625em}.katex .fontsize-ensurer.reset-size4.size2,.katex .sizing.reset-size4.size2{font-size:.75em}.katex .fontsize-ensurer.reset-size4.size3,.katex .sizing.reset-size4.size3{font-size:.875em}.katex .fontsize-ensurer.reset-size4.size4,.katex .sizing.reset-size4.size4{font-size:1em}.katex .fontsize-ensurer.reset-size4.size5,.katex .sizing.reset-size4.size5{font-size:1.125em}.katex .fontsize-ensurer.reset-size4.size6,.katex .sizing.reset-size4.size6{font-size:1.25em}.katex .fontsize-ensurer.reset-size4.size7,.katex .sizing.reset-size4.size7{font-size:1.5em}.katex .fontsize-ensurer.reset-size4.size8,.katex .sizing.reset-size4.size8{font-size:1.8em}.katex .fontsize-ensurer.reset-size4.size9,.katex .sizing.reset-size4.size9{font-size:2.16em}.katex .fontsize-ensurer.reset-size4.size10,.katex .sizing.reset-size4.size10{font-size:2.5925em}.katex .fontsize-ensurer.reset-size4.size11,.katex .sizing.reset-size4.size11{font-size:3.11em}.katex .fontsize-ensurer.reset-size5.size1,.katex .sizing.reset-size5.size1{font-size:.55555556em}.katex .fontsize-ensurer.reset-size5.size2,.katex .sizing.reset-size5.size2{font-size:.66666667em}.katex .fontsize-ensurer.reset-size5.size3,.katex .sizing.reset-size5.size3{font-size:.77777778em}.katex .fontsize-ensurer.reset-size5.size4,.katex .sizing.reset-size5.size4{font-size:.88888889em}.katex .fontsize-ensurer.reset-size5.size5,.katex .sizing.reset-size5.size5{font-size:1em}.katex .fontsize-ensurer.reset-size5.size6,.katex .sizing.reset-size5.size6{font-size:1.11111111em}.katex .fontsize-ensurer.reset-size5.size7,.katex .sizing.reset-size5.size7{font-size:1.33333333em}.katex .fontsize-ensurer.reset-size5.size8,.katex .sizing.reset-size5.size8{font-size:1.6em}.katex .fontsize-ensurer.reset-size5.size9,.katex .sizing.reset-size5.size9{font-size:1.92em}.katex .fontsize-ensurer.reset-size5.size10,.katex .sizing.reset-size5.size10{font-size:2.30444444em}.katex .fontsize-ensurer.reset-size5.size11,.katex .sizing.reset-size5.size11{font-size:2.76444444em}.katex .fontsize-ensurer.reset-size6.size1,.katex .sizing.reset-size6.size1{font-size:.5em}.katex .fontsize-ensurer.reset-size6.size2,.katex .sizing.reset-size6.size2{font-size:.6em}.katex .fontsize-ensurer.reset-size6.size3,.katex .sizing.reset-size6.size3{font-size:.7em}.katex .fontsize-ensurer.reset-size6.size4,.katex .sizing.reset-size6.size4{font-size:.8em}.katex .fontsize-ensurer.reset-size6.size5,.katex .sizing.reset-size6.size5{font-size:.9em}.katex .fontsize-ensurer.reset-size6.size6,.katex .sizing.reset-size6.size6{font-size:1em}.katex .fontsize-ensurer.reset-size6.size7,.katex .sizing.reset-size6.size7{font-size:1.2em}.katex .fontsize-ensurer.reset-size6.size8,.katex .sizing.reset-size6.size8{font-size:1.44em}.katex .fontsize-ensurer.reset-size6.size9,.katex .sizing.reset-size6.size9{font-size:1.728em}.katex .fontsize-ensurer.reset-size6.size10,.katex .sizing.reset-size6.size10{font-size:2.074em}.katex .fontsize-ensurer.reset-size6.size11,.katex .sizing.reset-size6.size11{font-size:2.488em}.katex .fontsize-ensurer.reset-size7.size1,.katex .sizing.reset-size7.size1{font-size:.41666667em}.katex .fontsize-ensurer.reset-size7.size2,.katex .sizing.reset-size7.size2{font-size:.5em}.katex .fontsize-ensurer.reset-size7.size3,.katex .sizing.reset-size7.size3{font-size:.58333333em}.katex .fontsize-ensurer.reset-size7.size4,.katex .sizing.reset-size7.size4{font-size:.66666667em}.katex .fontsize-ensurer.reset-size7.size5,.katex .sizing.reset-size7.size5{font-size:.75em}.katex .fontsize-ensurer.reset-size7.size6,.katex .sizing.reset-size7.size6{font-size:.83333333em}.katex .fontsize-ensurer.reset-size7.size7,.katex .sizing.reset-size7.size7{font-size:1em}.katex .fontsize-ensurer.reset-size7.size8,.katex .sizing.reset-size7.size8{font-size:1.2em}.katex .fontsize-ensurer.reset-size7.size9,.katex .sizing.reset-size7.size9{font-size:1.44em}.katex .fontsize-ensurer.reset-size7.size10,.katex .sizing.reset-size7.size10{font-size:1.72833333em}.katex .fontsize-ensurer.reset-size7.size11,.katex .sizing.reset-size7.size11{font-size:2.07333333em}.katex .fontsize-ensurer.reset-size8.size1,.katex .sizing.reset-size8.size1{font-size:.34722222em}.katex .fontsize-ensurer.reset-size8.size2,.katex .sizing.reset-size8.size2{font-size:.41666667em}.katex .fontsize-ensurer.reset-size8.size3,.katex .sizing.reset-size8.size3{font-size:.48611111em}.katex .fontsize-ensurer.reset-size8.size4,.katex .sizing.reset-size8.size4{font-size:.55555556em}.katex .fontsize-ensurer.reset-size8.size5,.katex .sizing.reset-size8.size5{font-size:.625em}.katex .fontsize-ensurer.reset-size8.size6,.katex .sizing.reset-size8.size6{font-size:.69444444em}.katex .fontsize-ensurer.reset-size8.size7,.katex .sizing.reset-size8.size7{font-size:.83333333em}.katex .fontsize-ensurer.reset-size8.size8,.katex .sizing.reset-size8.size8{font-size:1em}.katex .fontsize-ensurer.reset-size8.size9,.katex .sizing.reset-size8.size9{font-size:1.2em}.katex .fontsize-ensurer.reset-size8.size10,.katex .sizing.reset-size8.size10{font-size:1.44027778em}.katex .fontsize-ensurer.reset-size8.size11,.katex .sizing.reset-size8.size11{font-size:1.72777778em}.katex .fontsize-ensurer.reset-size9.size1,.katex .sizing.reset-size9.size1{font-size:.28935185em}.katex .fontsize-ensurer.reset-size9.size2,.katex .sizing.reset-size9.size2{font-size:.34722222em}.katex .fontsize-ensurer.reset-size9.size3,.katex .sizing.reset-size9.size3{font-size:.40509259em}.katex .fontsize-ensurer.reset-size9.size4,.katex .sizing.reset-size9.size4{font-size:.46296296em}.katex .fontsize-ensurer.reset-size9.size5,.katex .sizing.reset-size9.size5{font-size:.52083333em}.katex .fontsize-ensurer.reset-size9.size6,.katex .sizing.reset-size9.size6{font-size:.5787037em}.katex .fontsize-ensurer.reset-size9.size7,.katex .sizing.reset-size9.size7{font-size:.69444444em}.katex .fontsize-ensurer.reset-size9.size8,.katex .sizing.reset-size9.size8{font-size:.83333333em}.katex .fontsize-ensurer.reset-size9.size9,.katex .sizing.reset-size9.size9{font-size:1em}.katex .fontsize-ensurer.reset-size9.size10,.katex .sizing.reset-size9.size10{font-size:1.20023148em}.katex .fontsize-ensurer.reset-size9.size11,.katex .sizing.reset-size9.size11{font-size:1.43981481em}.katex .fontsize-ensurer.reset-size10.size1,.katex .sizing.reset-size10.size1{font-size:.24108004em}.katex .fontsize-ensurer.reset-size10.size2,.katex .sizing.reset-size10.size2{font-size:.28929605em}.katex .fontsize-ensurer.reset-size10.size3,.katex .sizing.reset-size10.size3{font-size:.33751205em}.katex .fontsize-ensurer.reset-size10.size4,.katex .sizing.reset-size10.size4{font-size:.38572806em}.katex .fontsize-ensurer.reset-size10.size5,.katex .sizing.reset-size10.size5{font-size:.43394407em}.katex .fontsize-ensurer.reset-size10.size6,.katex .sizing.reset-size10.size6{font-size:.48216008em}.katex .fontsize-ensurer.reset-size10.size7,.katex .sizing.reset-size10.size7{font-size:.57859209em}.katex .fontsize-ensurer.reset-size10.size8,.katex .sizing.reset-size10.size8{font-size:.69431051em}.katex .fontsize-ensurer.reset-size10.size9,.katex .sizing.reset-size10.size9{font-size:.83317261em}.katex .fontsize-ensurer.reset-size10.size10,.katex .sizing.reset-size10.size10{font-size:1em}.katex .fontsize-ensurer.reset-size10.size11,.katex .sizing.reset-size10.size11{font-size:1.19961427em}.katex .fontsize-ensurer.reset-size11.size1,.katex .sizing.reset-size11.size1{font-size:.20096463em}.katex .fontsize-ensurer.reset-size11.size2,.katex .sizing.reset-size11.size2{font-size:.24115756em}.katex .fontsize-ensurer.reset-size11.size3,.katex .sizing.reset-size11.size3{font-size:.28135048em}.katex .fontsize-ensurer.reset-size11.size4,.katex .sizing.reset-size11.size4{font-size:.32154341em}.katex .fontsize-ensurer.reset-size11.size5,.katex .sizing.reset-size11.size5{font-size:.36173633em}.katex .fontsize-ensurer.reset-size11.size6,.katex .sizing.reset-size11.size6{font-size:.40192926em}.katex .fontsize-ensurer.reset-size11.size7,.katex .sizing.reset-size11.size7{font-size:.48231511em}.katex .fontsize-ensurer.reset-size11.size8,.katex .sizing.reset-size11.size8{font-size:.57877814em}.katex .fontsize-ensurer.reset-size11.size9,.katex .sizing.reset-size11.size9{font-size:.69453376em}.katex .fontsize-ensurer.reset-size11.size10,.katex .sizing.reset-size11.size10{font-size:.83360129em}.katex .fontsize-ensurer.reset-size11.size11,.katex .sizing.reset-size11.size11{font-size:1em}.katex .delimsizing.size1{font-family:KaTeX_Size1}.katex .delimsizing.size2{font-family:KaTeX_Size2}.katex .delimsizing.size3{font-family:KaTeX_Size3}.katex .delimsizing.size4{font-family:KaTeX_Size4}.katex .delimsizing.mult .delim-size1>span{font-family:KaTeX_Size1}.katex .delimsizing.mult .delim-size4>span{font-family:KaTeX_Size4}.katex .nulldelimiter{display:inline-block;width:.12em}.katex .delimcenter,.katex .op-symbol{position:relative}.katex .op-symbol.small-op{font-family:KaTeX_Size1}.katex .op-symbol.large-op{font-family:KaTeX_Size2}.katex .op-limits>.vlist-t{text-align:center}.katex .accent>.vlist-t{text-align:center}.katex .accent .accent-body{position:relative}.katex .accent .accent-body:not(.accent-full){width:0}.katex .overlay{display:block}.katex .mtable .vertical-separator{display:inline-block;min-width:1px}.katex .mtable .arraycolsep{display:inline-block}.katex .mtable .col-align-c>.vlist-t{text-align:center}.katex .mtable .col-align-l>.vlist-t{text-align:left}.katex .mtable .col-align-r>.vlist-t{text-align:right}.katex .svg-align{text-align:left}.katex svg{display:block;position:absolute;width:100%;height:inherit;fill:currentColor;stroke:currentColor;fill-rule:nonzero;fill-opacity:1;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1}.katex svg path{stroke:none}.katex img{border-style:none;min-width:0;min-height:0;max-width:none;max-height:none}.katex .stretchy{width:100%;display:block;position:relative;overflow:hidden}.katex .stretchy:after,.katex .stretchy:before{content:""}.katex .hide-tail{width:100%;position:relative;overflow:hidden}.katex .halfarrow-left{position:absolute;left:0;width:50.2%;overflow:hidden}.katex .halfarrow-right{position:absolute;right:0;width:50.2%;overflow:hidden}.katex .brace-left{position:absolute;left:0;width:25.1%;overflow:hidden}.katex .brace-center{position:absolute;left:25%;width:50%;overflow:hidden}.katex .brace-right{position:absolute;right:0;width:25.1%;overflow:hidden}.katex .x-arrow-pad{padding:0 .5em}.katex .mover,.katex .munder,.katex .x-arrow{text-align:center}.katex .boxpad{padding:0 .3em}.katex .fbox,.katex .fcolorbox{box-sizing:border-box;border:.04em solid}.katex .cancel-pad{padding:0 .2em}.katex .cancel-lap{margin-left:-.2em;margin-right:-.2em}.katex .sout{border-bottom-style:solid;border-bottom-width:.08em}.katex-display{display:block;margin:1em 0;text-align:center}.katex-display>.katex{display:block;text-align:center;white-space:nowrap}.katex-display>.katex>.katex-html{display:block;position:relative}.katex-display>.katex>.katex-html>.tag{position:absolute;right:0}.katex-display.leqno>.katex>.katex-html>.tag{left:0;right:auto}.katex-display.fleqn>.katex{text-align:left}

/* style for html inside of browsers */
.katex { font-size: 1em !important; } /* align KaTeX font-size to surrounding text */

eq { display: inline-block; }
eqn { display: block}
section.eqno {
    display: flex;
    flex-direction: row;
    align-content: space-between;
    align-items: center;
}
section.eqno > eqn {
    width: 100%;
    margin-left: 3em;
}
section.eqno > span {
    width:3em;
    text-align:right;
}

p { text-align: justify; }

table {
    display: table !important;
    width: auto !important;
    margin-left: auto !important;
    margin-right: auto !important; 
    border-collapse: collapse !important;
}

table th, table td {
    border-left: none !important;
    border-right: none !important;
    border-top: 1px solid #000 !important;
    border-bottom: 1px solid #000 !important;
}

figure {
    margin: 0.5em auto;
}
figure > img {
    display: block;
    margin: 0 auto;
    page-break-inside: avoid;
}
figcaption { 
    display: block;
    text-align: center;
    margin-top: 0.5em;
}

</style>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/katex.min.css" integrity="sha384-yFRtMMDnQtDRO8rLpMIKrtPCD5jdktao2TV19YiZYWMDkUR5GQZR/NOVTdquEx1j" crossorigin="anonymous">
<link href="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.css" rel="stylesheet" type="text/css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/markdown.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/highlight.css">
<style>
            body {
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe WPC', 'Segoe UI', system-ui, 'Ubuntu', 'Droid Sans', sans-serif;
                font-size: 14px;
                line-height: 1.6;
            }
        </style>
        <style>
.task-list-item { list-style-type: none; } .task-list-item-checkbox { margin-left: -20px; vertical-align: middle; }
</style>
        
        <script src="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.js"></script>
        
    </head>
    <body class="vscode-body vscode-light">
        <h1 id="计算几何模板大全">计算几何模板大全</h1>
<p><a href="https://www.cnblogs.com/Xing-Ling/p/12102489.html">https://www.cnblogs.com/Xing-Ling/p/12102489.html</a></p>
<h1 id="part-1-点与向量">PART 1 点与向量</h1>
<h2 id="基础板子点和向量">基础板子（点和向量）</h2>
<pre><code class="language-cpp"><div><span class="hljs-keyword">const</span> db eps = <span class="hljs-number">1e-8</span>, inf = <span class="hljs-number">1e10</span>;
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">dcmp</span><span class="hljs-params">(db x)</span> </span>{<span class="hljs-keyword">return</span> x &lt; -eps ? <span class="hljs-number">-1</span> : (x &gt; eps ? <span class="hljs-number">1</span> : <span class="hljs-number">0</span>);}
<span class="hljs-function">db <span class="hljs-title">Abs</span><span class="hljs-params">(db x)</span> </span>{<span class="hljs-keyword">return</span> x * dcmp(x);}
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Pnt</span> {</span>
	db x, y;
	Pnt(db x = <span class="hljs-number">0</span>, db y = <span class="hljs-number">0</span>) : x(x), y(y) {}
};
<span class="hljs-keyword">typedef</span> Pnt Vec;
<span class="hljs-function">db <span class="hljs-title">Dot</span><span class="hljs-params">(<span class="hljs-keyword">const</span> Vec&amp; a, <span class="hljs-keyword">const</span> Vec&amp; b)</span> </span>{<span class="hljs-keyword">return</span> a.x * b.x + a.y * b.y;}
<span class="hljs-function">db <span class="hljs-title">Cro</span><span class="hljs-params">(<span class="hljs-keyword">const</span> Vec&amp; a, <span class="hljs-keyword">const</span> Vec&amp; b)</span> </span>{<span class="hljs-keyword">return</span> a.x * b.y - a.y * b.x;}
<span class="hljs-function">db <span class="hljs-title">Len</span><span class="hljs-params">(<span class="hljs-keyword">const</span> Vec&amp; a)</span> </span>{<span class="hljs-keyword">return</span> <span class="hljs-built_in">sqrt</span>(Dot(a, a));}
Vec <span class="hljs-keyword">operator</span> + (<span class="hljs-keyword">const</span> Vec&amp; a, <span class="hljs-keyword">const</span> Vec&amp; b) {<span class="hljs-keyword">return</span> Vec(a.x + b.x, a.y + b.y);}
Vec <span class="hljs-keyword">operator</span> - (<span class="hljs-keyword">const</span> Vec&amp; a, <span class="hljs-keyword">const</span> Vec&amp; b) {<span class="hljs-keyword">return</span> Vec(a.x - b.x, a.y - b.y);}
Vec <span class="hljs-keyword">operator</span> * (<span class="hljs-keyword">const</span> Vec&amp; a, <span class="hljs-keyword">const</span> db&amp; b) {<span class="hljs-keyword">return</span> Vec(a.x * b, a.y * b);}
<span class="hljs-keyword">bool</span> <span class="hljs-keyword">operator</span> == (<span class="hljs-keyword">const</span> Pnt&amp; a, <span class="hljs-keyword">const</span> Pnt&amp; b) {<span class="hljs-keyword">return</span> !dcmp(a.x - b.x) &amp;&amp; !dcmp(a.y - b.y);}
<span class="hljs-function">db <span class="hljs-title">Angle</span><span class="hljs-params">(<span class="hljs-keyword">const</span> Vec&amp; a, <span class="hljs-keyword">const</span> Vec&amp; b)</span> </span>{<span class="hljs-keyword">return</span> <span class="hljs-built_in">acos</span>(Dot(a, b) / Len(a) / Len(b));}
</div></code></pre>
<h2 id="位置变换">位置变换</h2>
<p>向量 <eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold-italic">a</mi></mrow><annotation encoding="application/x-tex">\bm a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.44444em;vertical-align:0em;"></span><span class="mord"><span class="mord boldsymbol">a</span></span></span></span></span></eq> 逆时针转 <eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>θ</mi></mrow><annotation encoding="application/x-tex">\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span></span></span></span></eq> 弧度。</p>
<section><eqn><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msup><mi>x</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msup><mi>y</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>cos</mi><mo>⁡</mo><mi>θ</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>−</mo><mi>sin</mi><mo>⁡</mo><mi>θ</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>sin</mi><mo>⁡</mo><mi>θ</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>cos</mi><mo>⁡</mo><mi>θ</mi></mrow></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>x</mi></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>y</mi></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow></mrow><annotation encoding="application/x-tex">
\begin{bmatrix}
    x&#x27;
    \\
    y&#x27;
\end{bmatrix}
=
\begin{bmatrix}
    \cos \theta &amp; -\sin \theta
    \\
    \sin \theta &amp; \cos \theta
\end{bmatrix}
\begin{bmatrix}
    x
    \\
    y
\end{bmatrix}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.40003em;vertical-align:-0.95003em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.751892em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.751892em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.40003em;vertical-align:-0.95003em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mop">cos</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mop">sin</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">−</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop">sin</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mop">cos</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">x</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span></span></span></span></span></eqn></section><pre><code class="language-cpp"><div><span class="hljs-function">Pnt <span class="hljs-title">Turn</span><span class="hljs-params">(<span class="hljs-keyword">const</span> Pnt&amp; p, <span class="hljs-keyword">const</span> db&amp; rad)</span> </span>{<span class="hljs-keyword">return</span> Pnt(p.x * <span class="hljs-built_in">cos</span>(rad) - p.y * <span class="hljs-built_in">sin</span>(rad), p.x * <span class="hljs-built_in">sin</span>(rad) + p.y * <span class="hljs-built_in">cos</span>(rad));}
</div></code></pre>
<h1 id="part-2-点直线线段">PART 2 点、直线、线段</h1>
<pre><code class="language-cpp"><div><span class="hljs-keyword">typedef</span> <span class="hljs-built_in">pair</span>&lt;Pnt, Pnt&gt; Line;
<span class="hljs-keyword">typedef</span> <span class="hljs-built_in">pair</span>&lt;Pnt, Pnt&gt; Seg;
</div></code></pre>
<p>一般写函数时，直线先用两个参数（两个 <code>Pnt</code>）表示；为了方便，再重载一下。接下来的部分仅使用前者。</p>
<h2 id="点和直线">点和直线</h2>
<p>(1) 点在直线上？</p>
<pre><code class="language-cpp"><div><span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">isPointonLine</span><span class="hljs-params">(<span class="hljs-keyword">const</span> Pnt&amp; p, <span class="hljs-keyword">const</span> Pnt&amp; a, <span class="hljs-keyword">const</span> Pnt&amp; b)</span> </span>{
    <span class="hljs-keyword">return</span> !dcmp(Cro(p-a, b-a));
}
</div></code></pre>
<p>(2) 点到直线的投影（垂足）</p>
<pre><code class="language-cpp"><div><span class="hljs-function">Pnt <span class="hljs-title">FootPoint</span><span class="hljs-params">(<span class="hljs-keyword">const</span> Pnt&amp; p, <span class="hljs-keyword">const</span> Pnt&amp; a, <span class="hljs-keyword">const</span> Pnt&amp; b)</span> </span>{
    Vec ab = b-a, ap = p-a;
    <span class="hljs-keyword">return</span> a + ab * (Dot(ap, ab) / Dot(ab, ab));
}
</div></code></pre>
<p>(3) 点到直线的距离</p>
<pre><code class="language-cpp"><div><span class="hljs-function">db <span class="hljs-title">DistPointLine</span><span class="hljs-params">(<span class="hljs-keyword">const</span> Pnt&amp; p, <span class="hljs-keyword">const</span> Pnt&amp; a, <span class="hljs-keyword">const</span> Pnt&amp; b)</span> </span>{
    <span class="hljs-keyword">return</span> Cro(p-a, p-b) / Len(b-a);
}
</div></code></pre>
<p>(4) 点关于直线的对称点</p>
<pre><code class="language-cpp"><div><span class="hljs-function">Pnt <span class="hljs-title">Reflect</span><span class="hljs-params">(<span class="hljs-keyword">const</span> Pnt&amp; p, <span class="hljs-keyword">const</span> Pnt&amp; a, <span class="hljs-keyword">const</span> Pnt&amp; b)</span> </span>{
    <span class="hljs-keyword">return</span> p + (FootPoint(p, a, b)-p) * <span class="hljs-number">2</span>;
}
</div></code></pre>
<h2 id="点和线段">点和线段</h2>
<p>(1) 点在线段上？</p>
<pre><code class="language-cpp"><div><span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">isPointonSeg</span><span class="hljs-params">(<span class="hljs-keyword">const</span> Pnt&amp; p, <span class="hljs-keyword">const</span> Pnt&amp; a, <span class="hljs-keyword">const</span> Pnt&amp; b)</span> </span>{
    <span class="hljs-keyword">return</span> !dcmp(Cro(p-a, b-a)) &amp;&amp; dcmp(Dot(p-a,p-b)) &lt;= <span class="hljs-number">0</span>;
}
</div></code></pre>
<p>(2) 点到线段的距离</p>
<pre><code class="language-cpp"><div><span class="hljs-function">db <span class="hljs-title">DistPointSeg</span><span class="hljs-params">(<span class="hljs-keyword">const</span> Pnt&amp; a, <span class="hljs-keyword">const</span> Pnt&amp; b)</span> </span>{
    <span class="hljs-keyword">if</span>(a == b) <span class="hljs-keyword">return</span> a;
    Vec ap = p-a, bp = p-b, ab = b-a;
    <span class="hljs-keyword">if</span>(dcmp(Dot(ap, ab)) &lt;= <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> Len(ap);
    <span class="hljs-keyword">if</span>(dcmp(Dot(bp, ab)) &gt;= <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> Len(bp);
    <span class="hljs-keyword">return</span> Abs(Cro(ap, bp) / Len(ab));
}
</div></code></pre>
<h2 id="线与线">线与线</h2>
<p>(1) 两直线交点</p>
<pre><code class="language-cpp"><div><span class="hljs-function">Pnt <span class="hljs-title">CrossPoint</span><span class="hljs-params">(<span class="hljs-keyword">const</span> Pnt&amp; a, <span class="hljs-keyword">const</span> Pnt&amp; b, <span class="hljs-keyword">const</span> Pnt&amp; c, <span class="hljs-keyword">const</span> Pnt&amp; d)</span> </span>{
    Vec ab = b-a, cd = d-c, ca = a-c;
    <span class="hljs-keyword">return</span> a + ab * (Cro(cd, ca) / Cro(ab, cd));
}
</div></code></pre>
<p>(2) 直线和线段是否相交</p>
<pre><code class="language-cpp"><div><span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">isCrossLineSeg</span><span class="hljs-params">(<span class="hljs-keyword">const</span> Pnt&amp; a, <span class="hljs-keyword">const</span> Pnt&amp; b, <span class="hljs-keyword">const</span> Pnt&amp; c, <span class="hljs-keyword">const</span> Pnt&amp; d)</span> </span>{
    Pnt p = CrossPoint(a, b, c, d);
    <span class="hljs-keyword">return</span> isPointonSeg(p, c, d);
}
</div></code></pre>
<p>(3) 线段和线段是否相交</p>
<p>分为两步：快速排斥实验和跨立实验</p>
<pre><code class="language-cpp"><div><span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">isCrossSegSeg</span><span class="hljs-params">(<span class="hljs-keyword">const</span> Pnt&amp; a, <span class="hljs-keyword">const</span> Pnt&amp; b, <span class="hljs-keyword">const</span> Pnt&amp; c, <span class="hljs-keyword">const</span> Pnt&amp; d)</span> </span>{
    <span class="hljs-keyword">if</span>(max(a.x, b.x) &lt; min(c.x, d.x) || max(c.x, d.x) &lt; min(a.x, b.x) || max(a.y, b.y) &lt; min(c.y, d.y) || max(c.y, d.y) &lt; min(a.y, b.y)) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
    <span class="hljs-keyword">if</span>(dcmp(Cro(c-b, a-b)) * dcmp(Cro(d-b, a-b)) &gt; <span class="hljs-number">0</span> || dcmp(Cro(a-c, d-c) * dcmp(b-c, d-c)) &gt; <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
}
</div></code></pre>
<h1 id="part-3-点线-与-多边形多边形-与-多边形">PART 3 点、线 与 多边形，多边形 与 多边形</h1>
<h2 id="点与多边形">点与多边形</h2>
<p>多边形的表示方法：</p>
<pre><code class="language-cpp"><div><span class="hljs-keyword">typedef</span> <span class="hljs-built_in">vector</span>&lt;Pnt&gt; Poly;
</div></code></pre>
<p>涉及到多边形（或者说凸包）时，相当重要的一点是点的顺序。一般我会在下面的算法标上 顺/逆 表示点的顺序。（其实顺逆都差不多qwq）</p>
<p>(1) 判断点在任意多边形内？</p>
<p>射线法，时间复杂度 <eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mclose">)</span></span></span></span></eq>。</p>
<pre><code class="language-cpp"><div><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">PIP</span><span class="hljs-params">(<span class="hljs-keyword">const</span> Pnt&amp; p, <span class="hljs-keyword">const</span> Poly&amp; G)</span> </span>{
	<span class="hljs-keyword">int</span> cnt = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">int</span> n = G.size();
    <span class="hljs-keyword">int</span> n = G.size();
	<span class="hljs-keyword">if</span>(n == <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> p == G[<span class="hljs-number">0</span>] ? <span class="hljs-number">2</span> : <span class="hljs-number">0</span>;
	<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(n == <span class="hljs-number">2</span>) <span class="hljs-keyword">return</span> isPointonSeg(p, G[<span class="hljs-number">0</span>], G[<span class="hljs-number">1</span>]) ? <span class="hljs-number">2</span> : <span class="hljs-number">0</span>;
	<span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++) {
		<span class="hljs-keyword">int</span> j = (i+<span class="hljs-number">1</span>) % n;
		<span class="hljs-keyword">if</span>(isPointonSeg(p, G[i], G[j])) <span class="hljs-keyword">return</span> <span class="hljs-number">2</span>;
		<span class="hljs-keyword">if</span>(p.y &gt;= min(G[i].y, G[j].y) &amp;&amp; p.y &lt; max(G[i].y, G[j].y)) {
			db tmp = G[i].x + (p.y - G[i].y) / (G[j].y - G[i].y) * (G[j].x - G[i].x);
			<span class="hljs-keyword">if</span>(dcmp(tmp - p.x) &gt; <span class="hljs-number">0</span>) cnt++;
		}
	}
	<span class="hljs-keyword">return</span> cnt &amp; <span class="hljs-number">1</span>;
}
<span class="hljs-comment">/*
返回 1：在多边形内
返回 2：在多边形上
返回 3：在多边形外。
*/</span>
</div></code></pre>
<p>(2) 判断点在凸多边形内？</p>
<p>二分法，时间复杂度 <eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>log</mi><mo>⁡</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(\log n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">n</span><span class="mclose">)</span></span></span></span></eq></p>
<pre><code class="language-cpp"><div><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">PIP</span><span class="hljs-params">(<span class="hljs-keyword">const</span> Pnt&amp; p, <span class="hljs-keyword">const</span> Poly&amp; G)</span> </span>{<span class="hljs-comment">//顺</span>
	<span class="hljs-keyword">int</span> n = G.size();
	<span class="hljs-keyword">if</span>(n == <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> p == G[<span class="hljs-number">0</span>] ? <span class="hljs-number">2</span> : <span class="hljs-number">0</span>;
	<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(n == <span class="hljs-number">2</span>) <span class="hljs-keyword">return</span> isPointonSeg(p, G[<span class="hljs-number">0</span>], G[<span class="hljs-number">1</span>]) ? <span class="hljs-number">2</span> : <span class="hljs-number">0</span>;
	<span class="hljs-keyword">if</span>(Cro(p-G[<span class="hljs-number">0</span>], G[<span class="hljs-number">1</span>]-G[<span class="hljs-number">0</span>]) &lt; <span class="hljs-number">0</span> || Cro(p-G[<span class="hljs-number">0</span>], G[n<span class="hljs-number">-1</span>]-G[<span class="hljs-number">0</span>]) &gt; <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
	<span class="hljs-keyword">if</span>(isPointonSeg(p, G[<span class="hljs-number">0</span>], G[<span class="hljs-number">1</span>]) || isPointonSeg(p, G[<span class="hljs-number">0</span>], G[n<span class="hljs-number">-1</span>])) <span class="hljs-keyword">return</span> <span class="hljs-number">2</span>;
	<span class="hljs-keyword">int</span> l = <span class="hljs-number">1</span>, r = n<span class="hljs-number">-2</span>, t = <span class="hljs-number">-1</span>;
	<span class="hljs-keyword">while</span>(l &lt;= r) {
		<span class="hljs-keyword">int</span> m = (l + r) &gt;&gt; <span class="hljs-number">1</span>;
		<span class="hljs-keyword">if</span>(Cro(p-G[<span class="hljs-number">0</span>], G[m]-G[<span class="hljs-number">0</span>]) &gt; <span class="hljs-number">0</span>) t = m, l = m + <span class="hljs-number">1</span>;
		<span class="hljs-keyword">else</span> r = m - <span class="hljs-number">1</span>;
	}
	<span class="hljs-keyword">if</span>(t == <span class="hljs-number">-1</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
	<span class="hljs-keyword">if</span>(Cro(p-G[t], G[t+<span class="hljs-number">1</span>]-G[t]) &lt; <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
	<span class="hljs-keyword">if</span>(isPointonSeg(p, G[t], G[t+<span class="hljs-number">1</span>])) <span class="hljs-keyword">return</span> <span class="hljs-number">2</span>;
	<span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
}
</div></code></pre>
<h2 id="线与多边形">线与多边形</h2>
<p>简单判断即可。</p>
<h2 id="多边形与多边形">多边形与多边形</h2>
<p>判断两个多边形的关系：相交/包含/相离。</p>
<p>首先，判断任意分别来自两个多边形的两边是否相交，判断多边形相交；</p>
<p>然后，若不相交，判断一个多边形是否有一点在另一个多边形内（相互要判断），判断是否包含；</p>
<p>最后，不相交也不包含则为相离。</p>
<h2 id="多边形周长">多边形周长</h2>
<p>有手就行。</p>
<pre><code class="language-cpp"><div><span class="hljs-function">db <span class="hljs-title">Circum</span><span class="hljs-params">(<span class="hljs-keyword">const</span> Poly&amp; G)</span> </span>{
	db ans = <span class="hljs-number">0</span>;
	<span class="hljs-keyword">int</span> n = G.size();
	<span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++) {
		<span class="hljs-keyword">int</span> j = (i+<span class="hljs-number">1</span>) % n;
		ans += Len(G[j]-G[i]);
	}
	<span class="hljs-keyword">return</span> ans;
}
</div></code></pre>
<h2 id="多边形面积">多边形面积</h2>
<p>用叉积求任意多边形面积：</p>
<pre><code class="language-cpp"><div><span class="hljs-function">db <span class="hljs-title">PolyArea</span><span class="hljs-params">(<span class="hljs-keyword">const</span> Poly&amp; G)</span> </span>{
    db ans = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">int</span> n = G.size();
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++) {
        <span class="hljs-keyword">int</span> j = (i+<span class="hljs-number">1</span>) % n;
        ans += Cro(G[i], G[j]);
    }
    <span class="hljs-keyword">return</span> Abs(ans / <span class="hljs-number">2</span>);
}
</div></code></pre>
<h1 id="part-4-凸包">PART 4 凸包</h1>
<p>Graham 扫描法</p>
<pre><code class="language-cpp"><div><span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">cmp</span><span class="hljs-params">(<span class="hljs-keyword">const</span> Pnt&amp; a, <span class="hljs-keyword">const</span> Pnt&amp; b)</span> </span>{<span class="hljs-keyword">return</span> dcmp(a.x - b.x) == <span class="hljs-number">0</span> ? a.y &lt; b.y : a.x &lt; b.x;}
<span class="hljs-function">Poly <span class="hljs-title">ConvexHull</span><span class="hljs-params">(Poly G)</span> </span>{<span class="hljs-comment">//顺</span>
	<span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> st[MAXN];
	<span class="hljs-keyword">int</span> _st = <span class="hljs-number">0</span>;
	sort(G.begin(), G.end(), cmp);
	unique(G.begin(), G.end());
	<span class="hljs-keyword">if</span>(G.size() &lt;= <span class="hljs-number">2</span>) <span class="hljs-keyword">return</span> G;
	<span class="hljs-keyword">int</span> n = G.size();
	st[++_st] = <span class="hljs-number">0</span>; st[++_st] = <span class="hljs-number">1</span>;
	<span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">2</span>; i &lt; n; i++) {
		<span class="hljs-keyword">while</span>(_st &gt; <span class="hljs-number">1</span> &amp;&amp; Cro(G[st[_st]]-G[st[_st<span class="hljs-number">-1</span>]], G[i]-G[st[_st]]) &gt;= <span class="hljs-number">0</span>) _st--;
		st[++_st] = i;
	}
	<span class="hljs-keyword">int</span> t = _st; st[++_st] = n<span class="hljs-number">-2</span>;
	<span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = n<span class="hljs-number">-3</span>; i &gt;= <span class="hljs-number">0</span>; i--) {
		<span class="hljs-keyword">while</span>(_st &gt; t &amp;&amp; Cro(G[st[_st]]-G[st[_st<span class="hljs-number">-1</span>]], G[i]-G[st[_st]]) &gt;= <span class="hljs-number">0</span>) _st--;
		st[++_st] = i;
	}
	Poly T;
	<span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt; _st; i++) T.push_back(G[st[i]]);
	<span class="hljs-keyword">return</span> T;
}
</div></code></pre>
<p>还有一种水平扫描线法，类似。</p>
<h2 id="part-5-旋转卡壳">PART 5 旋转卡壳</h2>
<p>求凸包直径</p>
<pre><code class="language-cpp"><div><span class="hljs-function">db <span class="hljs-title">Getmax</span><span class="hljs-params">(<span class="hljs-keyword">const</span> Poly&amp; G)</span> </span>{<span class="hljs-comment">//逆</span>
	<span class="hljs-keyword">int</span> n = G.size();
	<span class="hljs-keyword">if</span>(n == <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
	<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(n == <span class="hljs-number">2</span>) <span class="hljs-keyword">return</span> Len(G[<span class="hljs-number">1</span>]-G[<span class="hljs-number">0</span>]);
	db ans = Len(G[<span class="hljs-number">1</span>]-G[<span class="hljs-number">0</span>]);
	<span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>, j = <span class="hljs-number">2</span>; i &lt; n; i++) {
		<span class="hljs-keyword">int</span> i2 = (i+<span class="hljs-number">1</span>) % n, j2 = (j+<span class="hljs-number">1</span>) % n;
		<span class="hljs-keyword">while</span>(dcmp(Cro(G[i2]-G[i], G[j]-G[i]) - Cro(G[i2]-G[i], G[j2]-G[i])) &lt; <span class="hljs-number">0</span>) j = j2, j2 = (j2+<span class="hljs-number">1</span>) % n;
		ans = max(ans, max(Len(G[j]-G[i]), Len(G[j]-G[i2])));
	}
	<span class="hljs-keyword">return</span> ans;
}
</div></code></pre>
<h2 id="part-6-半平面交">PART 6 半平面交</h2>
<pre><code class="language-cpp"><div><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">dir</span><span class="hljs-params">(<span class="hljs-keyword">const</span> Pnt&amp; p, <span class="hljs-keyword">const</span> Pnt&amp; a, <span class="hljs-keyword">const</span> Pnt&amp; b)</span> </span>{<span class="hljs-keyword">return</span> dcmp(Cro(p - a, b - a));}
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Line</span> {</span>
	Pnt a, b;
	db k;
	Line(Pnt A = Pnt(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>), Pnt B = Pnt(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>)) {
		a = A; b = B; k = <span class="hljs-built_in">atan2</span>(b.y - a.y, b.x - a.x);
	}
};
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">dir</span><span class="hljs-params">(<span class="hljs-keyword">const</span> Pnt&amp; p, <span class="hljs-keyword">const</span> Line&amp; l)</span> </span>{<span class="hljs-keyword">return</span> dir(p, l.a, l.b);}
<span class="hljs-keyword">bool</span> <span class="hljs-keyword">operator</span> &lt; (<span class="hljs-keyword">const</span> Line&amp; p, <span class="hljs-keyword">const</span> Line&amp; q) {
	<span class="hljs-keyword">return</span> dcmp(p.k - q.k) == <span class="hljs-number">0</span> ? dir(p.a, q) == <span class="hljs-number">-1</span> : p.k &lt; q.k;
}
<span class="hljs-function">Pnt <span class="hljs-title">CrossPoint</span> <span class="hljs-params">(<span class="hljs-keyword">const</span> Pnt&amp; a, <span class="hljs-keyword">const</span> Pnt&amp; b, <span class="hljs-keyword">const</span> Pnt&amp; c, <span class="hljs-keyword">const</span> Pnt&amp; d)</span> </span>{
	Vec ab = b-a, cd = d-c, ca = a-c;
	<span class="hljs-keyword">return</span> a + ab * (Cro(cd, ca) / Cro(ab, cd));
}
<span class="hljs-function">Pnt <span class="hljs-title">CrossPoint</span><span class="hljs-params">(<span class="hljs-keyword">const</span> Line&amp; p, <span class="hljs-keyword">const</span> Line&amp; q)</span> </span>{<span class="hljs-keyword">return</span> CrossPoint(p.a, p.b, q.a, q.b);}
<span class="hljs-function">Poly <span class="hljs-title">Halfplanecut</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;Line&gt; G)</span> </span>{
	sort(G.begin(), G.end());
	<span class="hljs-keyword">int</span> n = <span class="hljs-number">0</span>;
	<span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt; (<span class="hljs-keyword">int</span>)G.size(); i++)
		<span class="hljs-keyword">if</span>(dcmp(G[i].k - G[i<span class="hljs-number">-1</span>].k)) G[++n] = G[i];
	n++; G.resize(n);
	<span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> que[MAXN];
	<span class="hljs-keyword">int</span> hd = <span class="hljs-number">1</span>, tl = <span class="hljs-number">0</span>;
	<span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++) {
		<span class="hljs-keyword">while</span>(hd &lt; tl &amp;&amp; dir(CrossPoint(G[que[tl]], G[que[tl<span class="hljs-number">-1</span>]]), G[i]) &gt; <span class="hljs-number">0</span>) --tl;
		<span class="hljs-keyword">while</span>(hd &lt; tl &amp;&amp; dir(CrossPoint(G[que[hd]], G[que[hd+<span class="hljs-number">1</span>]]), G[i]) &gt; <span class="hljs-number">0</span>) ++hd;
		que[++tl] = i;
	}
	<span class="hljs-keyword">while</span>(hd &lt; tl &amp;&amp; dir(CrossPoint(G[que[tl]], G[que[tl<span class="hljs-number">-1</span>]]), G[que[hd]]) &gt; <span class="hljs-number">0</span>) --tl;
	<span class="hljs-keyword">while</span>(hd &lt; tl &amp;&amp; dir(CrossPoint(G[que[hd]], G[que[hd+<span class="hljs-number">1</span>]]), G[que[tl]]) &gt; <span class="hljs-number">0</span>) ++hd;
	Poly ans;
	<span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = hd; i &lt;= tl; i++) {
		<span class="hljs-keyword">int</span> j = i == tl ? hd : i + <span class="hljs-number">1</span>;
		ans.push_back(CrossPoint(G[que[i]], G[que[j]]));
	}
	<span class="hljs-keyword">return</span> ans;<span class="hljs-comment">//逆</span>
}
</div></code></pre>

    </body>
    </html>