容易发现，全部边权加非负整数 $c$ 后，最短路可能会发生变化。但是，有 $t$ 条边的最短路在所有有 $t$ 条边的路径中还是不会变化的。

$O(n^2)$ dp 计算出两种情况（是否经过特殊点），且经过 $i$ 条边的最短路长度分别是 $p_i$ 和 $q_i$。那么两种情况的最短路长度关于 $c$ 的长度是一个下凸的玩意，即 $p_i+ic$（$q$ 同理）。直接 $O(n^2)$ 暴力求每条直线成为 $\min$ 的区间，然后再 $O(n^2)$ 地将 $p$ 与 $q$ 的每条直线进行组合即可。