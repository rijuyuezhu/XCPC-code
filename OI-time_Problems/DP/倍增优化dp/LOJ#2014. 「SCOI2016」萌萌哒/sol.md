很妙的一道题。

注意到区间相等其实就是对应相等。我们再在相等的元素之间连边，若最后的图里有 $k$ 个连通块，则最后答案为 $9\times 10^{k-1}$。如果使用并查集维护，是 $O(n^2)$ 的（并查集视为 $O(1)$）。但是最后查询是 $O(n)$，想办法平衡。

一个直观的想法是类似于线段树，区间性地维护。这题我们可以直接倍增维护，把询问拆成 $O(\log n)$ 个区间，最后查询时下传。